<!DOCTYPE html>
<head>
  <title>Consultas</title> 
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}" />

  <script>
  
    function mostrarHistorialCliente() {
      var cedula = document.getElementById('cedula').value;
      fetch('/tabla_historial?cedula=' + cedula)
          .then(response => response.json())
          .then(data => {
              console.log(data);
              generateTable(data);
          })
          .catch(error => {
              console.error('Error:', error);
          });
    }
       
        function generateTable(data) {
            var tableBody = document.querySelector('#myTable tbody');
            tableBody.innerHTML = '';

            data.forEach(rowData => {
                var row = document.createElement('tr');
                rowData.forEach(cellData => {
                    var cell = document.createElement('td');
                    cell.textContent = cellData;
                    row.appendChild(cell);
                });
                tableBody.appendChild(row);
            });
        }
        
  </script>

</head>

<body>

<h2> Historial de cliente </h2>
<table border = "2" id = "myTable"> 
  <thead>
    <tr>
      <th> Nombre </th>
      <th> Número_telefono </th>
      <th> Correo </th>
      <th> Producto </th>
      <th> Metodo_pago </th>
      <th> Costo </th>
    </tr>
  </thead>
  <tbody>

    {% for cliente in clientes %}
    <tr>
      <td>{{ cliente[0] }}</td>
      <td>{{ cliente[1] }}</td>
      <td>{{ cliente[2] }}</td>
      <td>{{ cliente[3] }}</td>
      <td>{{ cliente[4] }}</td>
      <td>{{ cliente[5] }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<input type="text" id="cedula" placeholder="Ingrese la cédula del cliente"><br>
<button onclick="mostrarHistorialCliente()" style="margin-right: auto;"> Click Me! </button>

</body>